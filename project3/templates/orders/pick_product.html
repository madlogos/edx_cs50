{% extends "_popup.html" %}
{% load static %}

{% block title %}
Topping / Additions
{% endblock %}

{% block script %}
<script src="{% static 'js/pick_product.js' %}"></script>
{% endblock %}

{% block disp %}
<h2>{{product.category}} - {{ product.name }} ({{ product.size }})</h2>

<form id="prod_form" name="prod_form" action="{% url 'pick_product' id=product.id %}" method="post" onsubmit="return check_toppings()">
{% csrf_token %}
<label>
    Unit price: <span style="font-size:x-large">$</span><span name="price" id="price" style="font-size:x-large">{{ product.price }}</span>
</label>
<br />
<label>Servings:
    <input name="qty" id="qty" type="number" style="text-align:center;width:50%" min="0" value="1" />
</label>
<button id="btn_submit" type="submit" class="btn btn-md btn-primary">Confirm</button>
<hr>
{% if product.n_topping > 0 %}
<table class="table table-striped table-hover table-responsive" cellspacing="0">
    <caption>You need to choose <span id="n_topping">{{ product.n_topping }}</span> pizza topping(s)</caption>
    <thead>
        <th>Topping</th>
        <th>Price</th>
        <th>Quantity</th>
    </thead>
    <tbody>
        {% for topping in toppings %}
        <tr>
            <td>{{ topping.name }}</td>
            <td id="topping_price_{{ topping.id }}">{{ topping.price }}</td>
            <td>
                <input name="topping_{{ topping.id }}" type="number" style="text-align:center;width:50%"
                 data-class="topping" data-item="{{ topping.id }}" min="0" max="{{ product.n_topping }}" />
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

{% if product.n_addition > 0 %}
<table class="table table-striped table-hover table-responsive" cellspacing="0">
    <caption>Feel free to choose addition(s) for subs</caption>
    <thead>
        <th>Additions</th>
        <th>Price</th>
        <th>Quantity</th>
    </thead>
    <tbody>
        {% for addition in additions %}
        <tr>
            <td>{{ addition.name }}</td>
            <td id="addition_price_{{ addition.id }}">{{ addition.price }}</td>
            <td>
                <input name="addition_{{ addition.id }}" type="number" style="text-align:center;width:50%"
                 data-class="addition" data-item="{{ addition.id }}" min="0" />
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

</form>
{% endblock %}

